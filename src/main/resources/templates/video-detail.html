<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${video.title} + ' - Random Videos 139'">Video Title - Random Videos 139</title>
    <meta name="description" th:content="${video.shortDescription}">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/webjars/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body class="dark-mode">
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img th:src="@{/images/logo.png}" alt="Random Videos 139 Logo" class="nav-logo-img">
                <span class="nav-logo-text">Random Videos 139</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="/" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="/popular-videos" class="nav-link">
                    <i class="fas fa-fire"></i>
                    <span>Popular Videos</span>
                </a>
                <a href="/all-videos" class="nav-link">
                    <i class="fas fa-video"></i>
                    <span>All Videos</span>
                </a>
                <a href="/playlists" class="nav-link">
                    <i class="fas fa-list"></i>
                    <span>Playlists</span>
                </a>
                <a href="/about" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>About Me</span>
                </a>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Theme Toggle -->
    <div class="theme-toggle">
        <button id="themeToggle" class="theme-toggle-btn" aria-label="Toggle theme">
            <i class="fas fa-sun light-icon"></i>
            <i class="fas fa-moon dark-icon"></i>
        </button>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="/" class="breadcrumb-link">
                <i class="fas fa-home"></i> Home
            </a>
            <span class="breadcrumb-separator">/</span>
            <a href="/all-videos" class="breadcrumb-link">All Videos</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current" th:text="${video.title}">Video Title</span>
        </nav>

        <!-- Main Content -->
        <main class="video-detail-main">
            <div class="video-detail-container">
                <!-- Video Player Section -->
                <section class="video-player-section">
                    <div class="video-player-container">
                        <div class="video-embed-wrapper">
                            <iframe 
                                th:src="'https://www.youtube.com/embed/' + ${video.videoId} + '?rel=0&modestbranding=1&showinfo=0'"
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowfullscreen
                                class="video-embed">
                            </iframe>
                        </div>
                        
                        <!-- Video Controls -->
                        <div class="video-controls">
                            <div class="video-actions">
                                <a th:href="${video.youTubeUrl}" target="_blank" rel="noopener noreferrer" class="action-btn youtube-btn">
                                    <i class="fab fa-youtube"></i>
                                    Watch on YouTube
                                </a>
                                <button class="action-btn share-btn" onclick="shareVideo()">
                                    <i class="fas fa-share"></i>
                                    Share
                                </button>
                                <button class="action-btn fullscreen-btn" onclick="toggleFullscreen()">
                                    <i class="fas fa-expand"></i>
                                    Fullscreen
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Video Information -->
                    <div class="video-info-section">
                        <h1 class="video-title" th:text="${video.title}">Video Title</h1>
                        
                        <div class="video-meta-bar">
                            <div class="video-stats">
                                <span class="stat-item">
                                    <i class="fas fa-eye"></i>
                                    <span th:text="${video.formattedViewCount} + ' views'">1.2K views</span>
                                </span>
                                <span class="stat-item" th:if="${video.likeCount != null}">
                                    <i class="fas fa-thumbs-up"></i>
                                    <span th:text="${video.formattedLikeCount} + ' likes'">50 likes</span>
                                </span>
                                <span class="stat-item" th:if="${video.commentCount != null}">
                                    <i class="fas fa-comment"></i>
                                    <span th:text="${video.formattedCommentCount} + ' comments'">10 comments</span>
                                </span>
                                <span class="stat-item">
                                    <i class="fas fa-calendar"></i>
                                    <span th:text="${video.timeAgo}">2 days ago</span>
                                </span>
                                <span class="stat-item" th:if="${video.duration}">
                                    <i class="fas fa-clock"></i>
                                    <span th:text="${video.duration}">3:45</span>
                                </span>
                            </div>
                        </div>

                        <!-- Channel Info -->
                        <div class="channel-info-bar">
                            <div class="channel-details">
                                <div class="channel-avatar">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div class="channel-text">
                                    <h3 class="channel-name" th:text="${channelName}">Random Videos 139</h3>
                                    <p class="channel-handle" th:text="${channelHandle}">@randomvideos1392</p>
                                </div>
                            </div>
                            <div class="channel-actions">
                                <a href="https://www.youtube.com/@randomvideos1392" target="_blank" rel="noopener noreferrer" class="subscribe-btn">
                                    <i class="fab fa-youtube"></i>
                                    Subscribe
                                </a>
                            </div>
                        </div>

                        <!-- Video Description -->
                        <div class="video-description-section">
                            <div class="description-header">
                                <h3>Description</h3>
                                <button class="description-toggle" onclick="toggleDescription()">
                                    <span class="toggle-text">Show more</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="description-content" id="descriptionContent">
                                <p th:text="${video.description}" class="description-text">Video description goes here...</p>
                            </div>
                        </div>

                        <!-- Tags -->
                        <div class="video-tags-section" th:if="${video.tags != null and !video.tags.isEmpty()}">
                            <h3>Tags</h3>
                            <div class="video-tags">
                                <span class="video-tag" th:each="tag : ${#strings.listSplit(video.tags, ',')}" th:text="'#' + ${#strings.trim(tag)}">#tag</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Sidebar -->
                <aside class="video-sidebar">
                    <!-- Related Videos -->
                    <section class="related-videos-section" th:if="${relatedVideos != null and !relatedVideos.isEmpty()}">
                        <h3 class="sidebar-title">
                            <i class="fas fa-video"></i>
                            More Videos
                        </h3>
                        <div class="related-videos-list">
                            <div class="related-video-item" th:each="relatedVideo : ${relatedVideos}">
                                <a th:href="@{'/video/' + ${relatedVideo.videoId}}" class="related-video-link">
                                    <div class="related-video-thumbnail">
                                        <img th:src="${relatedVideo.thumbnailUrl}" th:alt="${relatedVideo.title}" loading="lazy">
                                        <div class="related-video-duration" th:if="${relatedVideo.duration}" th:text="${relatedVideo.duration}">3:45</div>
                                    </div>
                                    <div class="related-video-info">
                                        <h4 class="related-video-title" th:text="${relatedVideo.title}">Related Video Title</h4>
                                        <div class="related-video-meta">
                                            <span th:text="${relatedVideo.formattedViewCount} + ' views'">1.2K views</span>
                                            <span th:text="${relatedVideo.timeAgo}">2 days ago</span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        
                        <div class="sidebar-actions">
                            <a href="/all-videos" class="view-all-btn">
                                <i class="fas fa-video"></i>
                                View All Videos
                            </a>
                        </div>
                    </section>

                    <!-- Quick Navigation -->
                    <section class="quick-nav-section">
                        <h3 class="sidebar-title">
                            <i class="fas fa-compass"></i>
                            Quick Navigation
                        </h3>
                        <div class="quick-nav-links">
                            <a href="/popular-videos" class="quick-nav-link">
                                <i class="fas fa-fire"></i>
                                Popular Videos
                            </a>
                            <a href="/playlists" class="quick-nav-link">
                                <i class="fas fa-list"></i>
                                Playlists
                            </a>
                            <a href="/about" class="quick-nav-link">
                                <i class="fas fa-user"></i>
                                About Me
                            </a>
                        </div>
                    </section>
                </aside>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <p>© 2024 Random Videos 139. All rights reserved.</p>
                    <p>Enjoy AI character songs and music</p>
                </div>
                <div class="footer-section">
                    <div class="footer-links">
                        <a href="/">Home</a>
                        <a href="/popular-videos">Popular Videos</a>
                        <a href="/all-videos">All Videos</a>
                        <a href="/playlists">Playlists</a>
                        <a href="/about">About Me</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script th:src="@{/js/script.js}"></script>
    <script>
        // Description toggle functionality
        function toggleDescription() {
            const content = document.getElementById('descriptionContent');
            const toggle = document.querySelector('.description-toggle');
            const toggleText = toggle.querySelector('.toggle-text');
            const toggleIcon = toggle.querySelector('i');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                toggleText.textContent = 'Show more';
                toggleIcon.className = 'fas fa-chevron-down';
            } else {
                content.classList.add('expanded');
                toggleText.textContent = 'Show less';
                toggleIcon.className = 'fas fa-chevron-up';
            }
        }

        // Share functionality
        function shareVideo() {
            const videoTitle = document.querySelector('.video-title').textContent;
            const videoUrl = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: videoTitle,
                    url: videoUrl
                }).catch(console.error);
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(videoUrl).then(() => {
                    // Show temporary notification
                    const btn = document.querySelector('.share-btn');
                    const originalText = btn.innerHTML;
                    btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    btn.classList.add('success');
                    
                    setTimeout(() => {
                        btn.innerHTML = originalText;
                        btn.classList.remove('success');
                    }, 2000);
                }).catch(console.error);
            }
        }

        // Fullscreen functionality
        function toggleFullscreen() {
            const videoContainer = document.querySelector('.video-embed-wrapper');
            
            if (!document.fullscreenElement) {
                videoContainer.requestFullscreen().catch(console.error);
            } else {
                document.exitFullscreen().catch(console.error);
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // F key for fullscreen
            if (e.key === 'f' || e.key === 'F') {
                e.preventDefault();
                toggleFullscreen();
            }
            
            // S key for share
            if (e.key === 's' || e.key === 'S') {
                e.preventDefault();
                shareVideo();
            }
        });

        // Auto-expand description if it's short
        document.addEventListener('DOMContentLoaded', function() {
            const descriptionText = document.querySelector('.description-text');
            if (descriptionText && descriptionText.textContent.length < 200) {
                document.getElementById('descriptionContent').classList.add('expanded');
                document.querySelector('.description-toggle').style.display = 'none';
            }
        });
    </script>
</body>
</html>

